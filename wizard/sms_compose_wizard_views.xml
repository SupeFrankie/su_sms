<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- SMS Compose Wizard Form -->
        <record id="view_sms_compose_wizard_form" model="ir.ui.view">
            <field name="name">sms.compose.wizard.form</field>
            <field name="model">sms.compose.wizard</field>
            <field name="arch" type="xml">
                <form string="Compose SMS">
                    <sheet>
                        <div class="oe_title">
                            <h1>Send SMS - Step <field name="current_step" readonly="1"/>/5</h1>
                        </div>
                        
                        <!-- Step 1: Select Type -->
                        <group invisible="current_step != '1'">
                            <field name="sms_type" widget="radio"/>
                        </group>
                        
                        <!-- Step 2: Configure Recipients -->
                        <group invisible="current_step != '2'">
                            <group invisible="sms_type != 'adhoc'">
                                <field name="import_file" filename="import_filename"/>
                                <field name="import_filename" invisible="1"/>
                            </group>
                            
                            <group invisible="sms_type != 'manual'">
                                <field name="manual_numbers" widget="text" 
                                       placeholder="Enter comma-separated numbers..."/>
                            </group>
                            
                            <group invisible="sms_type != 'student'">
                                <field name="school_id"/>
                                <field name="program_id"/>
                                <field name="course_id"/>
                            </group>
                            
                            <group invisible="sms_type != 'staff'">
                                <field name="department_id"/>
                                <field name="gender"/>
                            </group>
                        </group>
                        
                        <!-- Step 3: Preview -->
                        <group invisible="current_step != '3'">
                            <field name="recipient_count" readonly="1"/>
                            <field name="preview_recipient_ids" nolabel="1">
                                <list>
                                    <field name="name"/>
                                    <field name="phone_number"/>
                                </list>
                            </field>
                        </group>
                        
                        <!-- Step 4: Compose -->
                        <group invisible="current_step != '4'">
                            <field name="template_id"/>
                            <field name="message" widget="text" 
                                   placeholder="Enter your message..."/>
                            <label for="message_length"/>
                            <div>
                                <field name="message_length" readonly="1"/> characters 
                                (<field name="sms_count" readonly="1"/> SMS)
                            </div>
                        </group>
                        
                        <!-- Step 5: Review -->
                        <group invisible="current_step != '5'">
                            <group>
                                <field name="gateway_id"/>
                                <field name="recipient_count" readonly="1"/>
                                <field name="sms_count" readonly="1"/>
                                <field name="estimated_cost" readonly="1"/>
                            </group>
                            <group>
                                <field name="message" readonly="1" widget="text"/>
                            </group>
                        </group>
                    </sheet>
                    
                    <footer>
                        <button string="Previous" type="object" 
                                name="action_previous_step" 
                                class="btn-secondary" 
                                invisible="current_step == '1'"/>
                        <button string="Next" type="object" 
                                name="action_next_step" 
                                class="oe_highlight" 
                                invisible="current_step == '5'"/>
                        <button string="Send SMS" type="object" 
                                name="action_send_sms" 
                                class="oe_highlight" 
                                invisible="current_step != '5'"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <!-- Action -->
        <record id="action_sms_compose_wizard" model="ir.actions.act_window">
            <field name="name">Compose SMS</field>
            <field name="res_model">sms.compose.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>
    </data>
</odoo>