<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Backend Layout Extension - Add Sidebar -->
        <template id="sms_backend_layout" name="SMS Backend with Sidebar" inherit_id="web.layout">
            <xpath expr="//head" position="inside">
                <link rel="stylesheet" href="/su_sms/static/src/css/sms_sidebar.css"/>
                <script type="text/javascript" src="/su_sms/static/src/js/sms_sidebar.js"></script>
            </xpath>
            
            <xpath expr="//body" position="inside">
                <div class="sms-sidebar" id="smsSidebar">
                    <div class="sms-sidebar-header">
                        <h4>SMS System</h4>
                        <button class="btn btn-sm btn-link sms-sidebar-toggle" onclick="toggleSMSSidebar()">
                            <i class="fa fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="sms-sidebar-content">
                        <!-- User Profile Section -->
                        <div class="sms-user-profile">
                            <div class="sms-user-avatar">
                                <i class="fa fa-user-circle fa-3x"></i>
                            </div>
                            <div class="sms-user-info">
                                <strong id="smsUserName"></strong>
                                <small id="smsUserRole" class="text-muted"></small>
                                <small id="smsUserDept" class="text-muted"></small>
                            </div>
                        </div>
                        
                        <!-- Credit Balance Section -->
                        <div class="sms-credit-balance">
                            <div class="credit-label">SMS Credit Balance</div>
                            <div class="credit-amount" id="smsCreditBalance">
                                <i class="fa fa-spinner fa-spin"></i> Loading...
                            </div>
                            <button class="btn btn-sm btn-link" onclick="refreshCreditBalance()">
                                <i class="fa fa-refresh"></i> Refresh
                            </button>
                        </div>
                        
                        <!-- Quick Navigation -->
                        <div class="sms-quick-nav">
                            <h5>Quick Actions</h5>
                            <a href="/web#action=su_sms.action_sms_adhoc" class="sms-nav-item">
                                <i class="fa fa-upload"></i> Ad Hoc SMS
                            </a>
                            <a href="/web#action=su_sms.action_sms_manual" class="sms-nav-item">
                                <i class="fa fa-edit"></i> Manual SMS
                            </a>
                            <a href="/web#action=su_sms.action_sms_staff" class="sms-nav-item sms-role-staff-admin">
                                <i class="fa fa-users"></i> Staff SMS
                            </a>
                            <a href="/web#action=su_sms.action_sms_student" class="sms-nav-item sms-role-faculty-admin">
                                <i class="fa fa-graduation-cap"></i> Student SMS
                            </a>
                            <a href="/web#action=su_sms.action_sms_campaign_all" class="sms-nav-item">
                                <i class="fa fa-list"></i> All Campaigns
                            </a>
                        </div>
                        
                        <!-- Admin Section -->
                        <div class="sms-admin-section sms-role-system-admin">
                            <h5>Administration</h5>
                            <a href="/web#action=su_sms.action_sms_gateway_configuration" class="sms-nav-item">
                                <i class="fa fa-cog"></i> Gateway Config
                            </a>
                            <a href="/web#action=su_sms.action_sms_blacklist" class="sms-nav-item">
                                <i class="fa fa-ban"></i> Blacklist
                            </a>
                            <a href="/web#action=su_sms.action_sms_department_expenditure" class="sms-nav-item">
                                <i class="fa fa-money"></i> Expenditure
                            </a>
                        </div>
                    </div>
                    
                    <div class="sms-sidebar-footer">
                        <small class="text-muted">Powered by Africa's Talking</small>
                    </div>
                </div>
                
                <!-- Sidebar Toggle Button (Always Visible) -->
                <button class="sms-sidebar-trigger" onclick="toggleSMSSidebar()" title="Toggle SMS Sidebar">
                    <i class="fa fa-comment"></i>
                    <span class="badge" id="smsCreditBadge"></span>
                </button>
            </xpath>
        </template>
    </data>
</odoo>